{% extends "layout.html" %}
{% block page_title %}LED Panel{% endblock %}

{% block body %}

    {{ super() }}

    <div class="container-fluid">
        <div class="row mt-2">
            <div class="col-md-4">
                <button type="button" class="btn btn-danger w-100" func="colorWhipe" args="(255, 0, 0)">Red</button>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-success w-100" func="colorWipe" args="(0, 255, 0)">Green</button>
            </div>
            <div class="col-md-4">
                <button type="button" class="btn btn-primary w-100" func="colorWipe" args="(0, 0, 255)">Blue</button>
            </div>
        </div>
        <div class="row mt-2">
            <input type="range" class="form-range" id="brightness">
        </div>
        <div class="row mt-2">
            <div class="col-md-3">
                <button type="button" class="btn btn-primary w-100">Quick Events</button>
            </div>
        </div>
    </div>

    <script>
        $(function() {
            $('button').click(function() {
                $.ajax({
                    url: '{{ url_for("FUN_led") }}',
                    type: 'POST',
                    data: {
                        func: $(this).prop("func"),
                        args: $(this).prop("args")
                    }
                });
            });
        });

        let last_brightness = $('#brightness').value;

        setInterval(function(){ 
            if($('brightness').value != brightness) {
                last_brightness = $('#brightness').value;

                $.ajax({
                    url: '{{ url_for("FUN_led_b") }}',
                    type: 'POST',
                    data: {
                        brightness: last_brightness
                    }
                });
            }
        }, 500);
        
    </script>
    
{% endblock %}